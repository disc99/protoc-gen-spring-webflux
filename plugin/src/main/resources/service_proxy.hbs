public static class {{serviceName}}Proxy {

    private {{package}}.{{serviceName}}Grpc.{{serviceName}}Stub stub;

    public {{serviceName}}Proxy({{package}}.{{serviceName}}Grpc.{{serviceName}}Stub stub) {
        this.stub = stub;
    }

    @Nonnull
    public Mono<ServerResponse> proxyAll(ServerRequest serverRequest) {

        {{#methods}}
            if (RequestPredicates.method({{methodType}}).and(RequestPredicates.path("{{path}}")).test(serverRequest)) {
                return {{restMethodName}}(serverRequest);
            }
        {{/methods}}

        throw new ResponseStatusException(HttpStatus.NOT_FOUND);
    }

    @Nonnull
    public RouterFunction<ServerResponse> proxyAllRouterFunction() {
        return RouterFunctions.route()
            {{#methods}}
                .{{methodTypeName}}("{{path}}", this::{{restMethodName}})
            {{/methods}}
            .build();
    }

    {{#proxyMethodDefinitions}}{{.}}{{/proxyMethodDefinitions}}
}
