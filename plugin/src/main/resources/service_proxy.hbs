public static class {{serviceName}}Proxy {

    private {{package}}.{{serviceName}}Grpc.{{serviceName}}BlockingStub stub;

    public {{serviceName}}Proxy({{package}}.{{serviceName}}Grpc.{{serviceName}}BlockingStub stub) {
        this.stub = stub;
    }

    public Mono<ServerResponse> proxyAll(ServerRequest serverRequest) {

        {{#methods}}
            {{#if isRest}}
                if (RequestPredicates.method({{methodType}}).and(RequestPredicates.path("{{path}}")).test(serverRequest)) {
                    return {{restMethodName}}(serverRequest);
                }
            {{else}}
                if (RequestPredicates.method(HttpMethod.POST).and(RequestPredicates.path("/{{packageProto}}.{{serviceName}}/{{methodProto}}")).test(serverRequest)) {
                    return {{restMethodName}}(serverRequest);
                }
            {{/if}}
        {{/methods}}

        throw new ResponseStatusException(HttpStatus.NOT_FOUND);
    }

    {{#proxyMethodDefinitions}}{{.}}{{/proxyMethodDefinitions}}
}
